<!DOCTYPE html>
<html>
<head>
	<title>Version Check</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="https://escartem.github.io/electron/frame/notify.js"></script>
</head>
<body>
	<script lang="JavaScript">
		function notify(lang) {
			if (lang == 'fr') {
				var text = "Recherche de mise Ã  jour en cours...";
			} else if (lang == 'en') {
				var text = "Searching for updates...";
			}

	        $.notify(text, {
	            clickToHide: false,
	            autoHide: false,
	            position: "b l",
	            className: "info"
	        })
    	}
		function checkVersion()
		{
			var latestVersion = '2.1.0';
			var latestRawVersion = '210';

			var parameters = location.search.substring(1).split("&");

			var temp = parameters[0].split("=");
			var version = unescape(temp[1]);

			temp = parameters[1].split("=");
			var lang = unescape(temp[1]);

			var rawVersion = version.split('.').join('');

			setTimeout(() => {
				notify(lang);
			}, 2000);
			//notify(lang);

			if (rawVersion < latestRawVersion) {
				setTimeout(() => {
					window.location.replace("https://escartem.github.io/electron/frame/update_available?latest=" + latestVersion + "&current=" + version + "&lang=" + lang);
				}, 5000);
			} else {
				setTimeout(() => {
					window.location.replace("https://escartem.github.io/electron/frame/no_update?lang=" + lang);
				}, 5000);
				//window.location.replace("https://escartem.github.io/electron/frame/no_update");
			}
		}
		checkVersion();
	</script>
</body>
</html>